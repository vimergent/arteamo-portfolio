function encodeImagePath(path){return encodeURIComponent(path).replace(/\(/g,'%28').replace(/\)/g,'%29');}function openProjectGallery(projectFolder,projectName){const currentPath=window.location.pathname;const fromPath=currentPath.substring(0,currentPath.lastIndexOf('/')+1);window.location.href=`../gallery-premium.html?project=${encodeURIComponent(projectFolder)}&name=${encodeURIComponent(projectName)}&from=${encodeURIComponent(fromPath)}`;}const currentLang=localStorage.getItem('selectedLanguage')||'en';const galleryData=Object.entries(projectConfig).map(([folder,config])=>({folder:folder,name:config.name[currentLang]||config.name.en,images:config.images.slice(0,5)}));function getRandomImages(count=6){const allImages=[];galleryData.forEach(project=>{project.images.slice(0,2).forEach(image=>{const imagePath=`../projects/${project.folder}/${image}`;console.log('Generated path:',imagePath);allImages.push({src:imagePath,projectName:project.name,projectFolder:project.folder});});});for(let i=allImages.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[allImages[i],allImages[j]]=[allImages[j],allImages[i]];}return allImages.slice(0,count);}function createGalleryWithImages(container,images){container.innerHTML='';images.forEach((imageData,index)=>{const item=document.createElement('div');item.className='random-gallery-item loaded';const img=document.createElement('img');img.src=imageData.src;img.alt=imageData.projectName;img.loading=index<3?'eager':'lazy';const overlay=document.createElement('div');overlay.className='gallery-item-overlay';overlay.innerHTML=`<div class="gallery-item-title">${imageData.projectName}</div>`;item.appendChild(img);item.appendChild(overlay);item.addEventListener('click',()=>{openProjectGallery(imageData.projectFolder,imageData.projectName);});container.appendChild(item);});}let isRefreshing=false;let userInteracting=false;let lastInteraction=Date.now();function autoRefreshGallery(){if(isRefreshing||(Date.now()-lastInteraction<2000)){return;}isRefreshing=true;const gallery=document.getElementById('randomGallery');const randomImages=getRandomImages(6);const newGallery=document.createElement('div');newGallery.id='randomGalleryNew';newGallery.className='random-gallery';newGallery.style.position='absolute';newGallery.style.top='0';newGallery.style.left='0';newGallery.style.width='100%';newGallery.style.opacity='0';newGallery.style.transition='opacity 0.8s ease';gallery.parentNode.style.position='relative';gallery.parentNode.appendChild(newGallery);createGalleryWithImages(newGallery,randomImages);requestAnimationFrame(()=>{gallery.style.transition='opacity 0.8s ease';gallery.style.opacity='0';newGallery.style.opacity='1';setTimeout(()=>{gallery.remove();newGallery.id='randomGallery';newGallery.style.position='static';isRefreshing=false;},800);});}document.addEventListener('mousemove',()=>{lastInteraction=Date.now();});document.addEventListener('touchstart',()=>{lastInteraction=Date.now();});document.addEventListener('DOMContentLoaded',()=>{const gallery=document.getElementById('randomGallery');if(gallery){const initialImages=getRandomImages(6);createGalleryWithImages(gallery,initialImages);}});